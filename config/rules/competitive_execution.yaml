# Competitive Execution Rules
# Правила конкурентного виконання з вибором найкращого результату

competitive_system:
  name: "competitive_execution_engine"
  version: "2.3.0"
  description: "Multi-agent competition for optimal result selection"

# Умови активації конкурентного режиму
activation_conditions:
  score_range:
    min: 0.4
    max: 0.7
    description: "Parallel potential score range for competitive execution"

  agent_availability:
    min_agents: 2
    max_agents: 4
    description: "Minimum and maximum number of competing agents"

  task_characteristics:
    suitable_types:
      - "design_problems"
      - "analysis_tasks"
      - "optimization_challenges"
      - "creative_solutions"

    unsuitable_types:
      - "simple_information_retrieval"
      - "straightforward_implementation"
      - "routine_maintenance_tasks"

# Правила вибору конкурентів
competitor_selection:
  criteria:
    competency_match:
      weight: 0.4
      description: "How well agent competencies match task requirements"

    historical_performance:
      weight: 0.3
      description: "Past success rate on similar tasks"

    current_availability:
      weight: 0.2
      description: "Agent load and availability"

    diversity_bonus:
      weight: 0.1
      description: "Bonus for diverse approaches/perspectives"

  selection_process:
    step_1: "Filter agents by minimum competency threshold (0.6)"
    step_2: "Score agents using weighted criteria"
    step_3: "Select top N agents (2-4) for competition"
    step_4: "Validate agent availability and capacity"

# Метрики оцінки якості результатів
quality_metrics:
  accuracy_score:
    description: "Correctness and precision of the solution"
    weight: 0.35
    evaluation_criteria:
      - "technical_correctness"
      - "factual_accuracy"
      - "logical_consistency"

  completeness_score:
    description: "Thoroughness and coverage of requirements"
    weight: 0.25
    evaluation_criteria:
      - "requirement_coverage"
      - "detail_level"
      - "edge_case_handling"

  efficiency_score:
    description: "Resource efficiency and optimization"
    weight: 0.25
    evaluation_criteria:
      - "time_complexity"
      - "resource_usage"
      - "scalability_considerations"

  innovation_score:
    description: "Creativity and novel approaches"
    weight: 0.15
    evaluation_criteria:
      - "novelty_of_approach"
      - "creative_solutions"
      - "breakthrough_thinking"

  total_score_calculation:
    formula: "accuracy*0.35 + completeness*0.25 + efficiency*0.25 + innovation*0.15"
    min_threshold: 0.6
    target_threshold: 0.8

# Процес конкурентного виконання
execution_process:
  setup_phase:
    duration: "10s"
    activities:
      - "Distribute task specification to all competitors"
      - "Set execution context and constraints"
      - "Initialize monitoring and timing"
      - "Establish communication channels"

  competition_phase:
    duration: "task_dependent"
    activities:
      - "Parallel execution by all competitors"
      - "Real-time monitoring of progress"
      - "Intermediate check-ins if duration > 60s"
      - "Error handling and recovery for individual agents"

  evaluation_phase:
    duration: "30s"
    activities:
      - "Collect all completed results"
      - "Apply quality metrics to each result"
      - "Calculate composite scores"
      - "Generate evaluation report"

  selection_phase:
    duration: "10s"
    activities:
      - "Identify highest-scoring result"
      - "Validate selection confidence"
      - "Prepare selection justification"
      - "Archive all results for learning"

# Правила вибору найкращого результату
selection_rules:
  winner_determination:
    primary: "highest_total_score"
    tie_breakers:
      1. "higher_accuracy_score"
      2. "higher_completeness_score"
      3. "lower_execution_time"
      4. "historical_performance_bonus"

  confidence_calculation:
    high_confidence:
      condition: "score_difference > 0.15"
      description: "Clear winner with significant margin"

    medium_confidence:
      condition: "score_difference 0.05 - 0.15"
      description: "Winner with moderate margin"

    low_confidence:
      condition: "score_difference < 0.05"
      description: "Close competition, consider hybrid approach"

  special_cases:
    all_fail:
      condition: "no_successful_competitors"
      action: "fallback_to_sequential_with_best_available_agent"

    single_success:
      condition: "only_one_successful_competitor"
      action: "select_single_successful_result"

    quality_tie:
      condition: "multiple winners with equal scores"
      action: "hybrid_approach_combining_best_elements"

# Гібридні підходи для близьких результатів
hybrid_approaches:
  element_selection:
    description: "Select best elements from multiple results"
    process:
      1. "Identify strongest components in each result"
      2. "Evaluate compatibility between components"
      3. "Construct hybrid solution"
      4. "Validate hybrid coherence"

  consensus_building:
    description: "Find common ground across results"
    process:
      1. "Identify common elements across all results"
      2. "Analyze areas of disagreement"
      3. "Apply conflict resolution strategies"
      4. "Build consensus solution"

  voting_mechanism:
    description: "Use voting to resolve conflicts"
    process:
      1. "Present conflicting options to evaluation panel"
      2. "Weight votes by agent expertise"
      3. "Select majority preference"
      4. "Document voting rationale"

# Моніторинг конкурентного процесу
monitoring:
  real_time_metrics:
    - "competitor_progress_percentage"
    - "estimated_completion_time"
    - "resource_utilization_per_competitor"
    - "intermediate_quality_indicators"

  health_checks:
    - "stagnation_detection"  # No progress for 60s
    - "resource_exhaustion"   # Agent resource limits exceeded
    - "communication_failure" # Agent unresponsive
    - "quality_degradation"   # Quality dropping during execution

  intervention_triggers:
    - "competitor_failure_rate > 50%"
    - "execution_time > 3x estimated"
    - "quality_scores < minimum_threshold"
    - "system_resource_usage > 90%"

# Навчання та адаптація
learning_system:
  data_collection:
    - "competition_outcomes"
    - "agent_performance_metrics"
    - "selection_accuracy"
    - "quality_prediction_accuracy"

  pattern_analysis:
    successful_patterns:
      - "optimal_competitor_combinations"
      - "task_type_success_correlations"
      - "quality_prediction_factors"

    failure_patterns:
      - "common_failure_modes"
      - "task_type_difficulty_indicators"
      - "resource_contention_scenarios"

  adaptive_improvements:
    threshold_adjustments:
      - "fine-tune activation_score_ranges"
      - "adjust quality_thresholds by task type"
      - "optimize competitor selection weights"

    process_optimizations:
      - "improve evaluation efficiency"
      - "reduce coordination overhead"
      - "enhance hybrid approach selection"

# Інтеграція з системою
integration:
  input_dependencies:
    - "config/rules/parallel_execution_rules.yaml"
    - "config/dynamic/agent_registry.yaml"
    - "config/dynamic/performance_monitoring.yaml"

  output_contributions:
    - "selected_optimal_result"
    - "competition_metadata"
    - "quality_assessment_report"
    - "learning_data_points"

  coordination_interfaces:
    - "request_competitive_execution"
    - "monitor_competition_progress"
    - "evaluate_competitive_results"
    - "handle_competition_exceptions"