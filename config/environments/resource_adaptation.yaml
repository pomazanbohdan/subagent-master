# Resource Adaptation Configuration
# Dynamic resource allocation and optimization strategies

adaptation_strategies:
  # Memory adaptation
  memory:
    detection:
      metrics: ["heap_usage", "gc_frequency", "gc_pause_time"]
      collection_interval: 30
      history_retention: 100

    scaling:
      enabled: true
      min_heap: "256MB"
      max_heap: "16GB"
      adjustment_step: "256MB"
      scale_up_threshold: 0.85
      scale_down_threshold: 0.60
      cooldown_period: 300

    gc_tuning:
      strategies:
        throughput:
          collector: "ParallelGC"
          max_gc_pause: "200ms"
          g1_heap_region_size: "16MB"

        latency:
          collector: "G1GC"
          max_gc_pause: "50ms"
          g1_heap_region_size: "8MB"

        compact:
          collector: "ZGC"
          max_gc_pause: "10ms"
          enable_class_data_sharing: true

  # CPU adaptation
  cpu:
    detection:
      metrics: ["cpu_usage", "load_average", "thread_count"]
      collection_interval: 15
      history_retention: 200

    scaling:
      enabled: true
      min_cores: 1
      max_cores: 16
      scale_up_threshold: 0.80
      scale_down_threshold: 0.40
      cooldown_period: 120

    thread_pool:
      min_threads: 4
      max_threads: 100
      queue_size: 1000
      keep_alive_time: 60

  # Network adaptation
  network:
    detection:
      metrics: ["connection_count", "response_time", "error_rate"]
      collection_interval: 10
      history_retention: 500

    connection_pool:
      min_connections: 2
      max_connections: 100
      idle_timeout: 300
      validation_interval: 30

    timeout_adaptation:
      base_timeout: 30
      max_timeout: 300
      min_timeout: 5
      adjustment_factor: 1.5

  # Storage adaptation
  storage:
    detection:
      metrics: ["disk_usage", "io_wait", "file_count"]
      collection_interval: 60
      history_retention: 1440

    cleanup:
      enabled: true
      threshold: 0.90
      cleanup_strategy: "lru"
      retention_policy:
        logs: "7days"
        temp_files: "1day"
        cache_files: "30days"

    compression:
      enabled: true
      threshold: "100MB"
      algorithm: "gzip"
      level: 6

# Environment-specific adaptation rules
environment_rules:
  development:
    memory:
      scaling:
        enabled: false
        fixed_heap: "2GB"

    cpu:
      scaling:
        enabled: false
        fixed_cores: 4

    monitoring:
      detailed_metrics: true
      collection_interval: 10

  production:
    memory:
      scaling:
        enabled: true
        conservative: true
        scale_up_threshold: 0.90
        scale_down_threshold: 0.70

    cpu:
      scaling:
        enabled: true
        aggressive: true
        scale_up_threshold: 0.75
        scale_down_threshold: 0.50

    monitoring:
      detailed_metrics: true
      collection_interval: 30

  testing:
    memory:
      scaling:
        enabled: false
        fixed_heap: "1GB"

    cpu:
      scaling:
        enabled: false
        fixed_cores: 2

    monitoring:
      detailed_metrics: false
      collection_interval: 60

# Performance optimization
optimization:
  # Cache optimization
  cache:
    strategies:
      lru:
        enabled: true
        max_size: "100MB"
        ttl: 300

      lfu:
        enabled: false
        max_size: "50MB"
        ttl: 600

      adaptive:
        enabled: true
        initial_size: "10MB"
        growth_factor: 1.5
        max_size: "500MB"

  # Connection optimization
  connections:
    keep_alive: true
    keep_alive_timeout: 30
    max_idle_time: 300
    tcp_nodelay: true

  # Serialization optimization
  serialization:
    format: "json"
    compression: true
    schema_validation: true

# Predictive adaptation
predictive:
  enabled: true
  model_type: "linear_regression"
  prediction_window: 300
  confidence_threshold: 0.8

  features:
    - "time_of_day"
    - "day_of_week"
    - "historical_load"
    - "seasonal_patterns"

  training:
    enabled: true
    retrain_interval: 86400
    min_data_points: 1000

# Cost optimization
cost:
  enabled: false  # Enable for cloud environments
  optimization_target: "cost_performance_ratio"

  resource_pricing:
    cpu_per_core: 0.05
    memory_per_gb: 0.01
    storage_per_gb: 0.001
    network_per_gb: 0.02

  budget_limits:
    daily: 100
    monthly: 3000
    alert_threshold: 0.80

# Adaptation limits and safeguards
safeguards:
  max_scale_up_rate: 2.0
  max_scale_down_rate: 0.5
  min_resource_stability_time: 300
  max_adaptations_per_hour: 10

  circuit_breaker:
    enabled: true
    failure_threshold: 5
    recovery_timeout: 600

# Notification and alerting
notifications:
  scale_events:
    enabled: true
    channels: ["log"]
    threshold: "significant_changes"

  performance_degradation:
    enabled: true
    channels: ["alert"]
    threshold: "severe"

  resource_exhaustion:
    enabled: true
    channels: ["alert", "email"]
    threshold: "critical"

# Adaptation reporting
reporting:
  enabled: true
  interval: 3600
  metrics:
    - "adaptation_count"
    - "resource_utilization"
    - "performance_impact"
    - "cost_impact"

  export_format: "json"
  retention_days: 30