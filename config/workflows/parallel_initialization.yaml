# Parallel Initialization Workflow
# Ð”ÐµÐºÐ»Ð°Ñ€Ð°Ñ‚Ð¸Ð²Ð½Ð¸Ð¹ Ð¾Ð¿Ð¸Ñ Ð¿Ð°Ñ€Ð°Ð»ÐµÐ»ÑŒÐ½Ð¾Ñ— Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ— ÑÐ¸ÑÑ‚ÐµÐ¼Ð¸

workflow:
  name: "parallel_initialization"
  version: "2.3.0"
  description: "Parallel system initialization with immediate readiness"

# ÐŸÐ°Ñ€Ð°Ð»ÐµÐ»ÑŒÐ½Ñ– Ð·Ð°Ð²Ð´Ð°Ð½Ð½Ñ Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ—
parallel_tasks:
  - task_id: "system_check"
    name: "System Availability Check"
    description: "Check system resources and validate configuration files"
    priority: 1
    timeout: 30s
    dependencies: []
    config_source: "config/dynamic/system_monitoring.yaml"

  - task_id: "config_loading"
    name: "Configuration Loading and Validation"
    description: "Load and validate all YAML configuration files"
    priority: 1
    timeout: 45s
    dependencies: []
    config_source: "config/workflows/initialization.yaml"

  - task_id: "agent_discovery"
    name: "Initialize Agent Capabilities"
    description: "Automatic agent discovery and capability extraction"
    priority: 1
    timeout: 60s
    dependencies: []
    config_source: "config/dynamic/agent_registry.yaml"

  - task_id: "compatibility_matrix"
    name: "Build Compatibility Matrix"
    description: "Create agent-task compatibility matrix with optimization"
    priority: 2
    timeout: 40s
    dependencies: ["agent_discovery"]
    config_source: "config/dynamic/categorization_engine.yaml"

  - task_id: "selection_rules"
    name: "Configure Selection Filters and Rules"
    description: "Setup agent selection rules and weight coefficients"
    priority: 2
    timeout: 35s
    dependencies: ["compatibility_matrix"]
    config_source: "config/rules/selection_rules.yaml"

  - task_id: "clarification_system"
    name: "Activate Clarification System"
    description: "Initialize clarification system for ambiguous requests"
    priority: 2
    timeout: 30s
    dependencies: ["config_loading"]
    config_source: "config/dynamic/clarification_engine.yaml"

  - task_id: "error_delegation"
    name: "Initialize Error Delegation System"
    description: "Setup error handling and delegation chains"
    priority: 2
    timeout: 40s
    dependencies: ["selection_rules"]
    config_source: "config/rules/error_handling.yaml"

  - task_id: "todo_framework"
    name: "Configure TODO Execution Framework"
    description: "Initialize TODO system and dependency management"
    priority: 2
    timeout: 35s
    dependencies: ["error_delegation"]
    config_source: "config/dynamic/task_management.yaml"

# ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° ÑÐ¸Ð½Ñ…Ñ€Ð¾Ð½Ñ–Ð·Ð°Ñ†Ñ–Ñ— Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ–Ð²
synchronization:
  strategy: "wait_for_all_with_timeout"
  timeout: 120s
  success_threshold: 0.8  # 80% tasks must succeed

  # ÐŸÑ€Ð°Ð²Ð¸Ð»Ð° Ð¾Ð±Ñ€Ð¾Ð±ÐºÐ¸ Ñ‡Ð°ÑÑ‚ÐºÐ¾Ð²Ð¸Ñ… Ð½ÐµÐ²Ð´Ð°Ñ‡
  partial_failure_handling:
    strategy: "continue_with_available"
    log_failures: true
    fallback_mode: "sequential_retry"

# ÐšÐµÑˆÑƒÐ²Ð°Ð½Ð½Ñ Ð³Ð¾Ñ‚Ð¾Ð²Ð¸Ñ… ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ñ–Ð²
caching:
  enabled: true
  cache_components:
    - "compatibility_matrix"
    - "agent_capabilities"
    - "selection_rules"
    - "clarification_templates"

  cache_ttl: 3600s  # 1 hour

# Ð’Ð°Ð»Ñ–Ð´Ð°Ñ†Ñ–Ñ Ð³Ð¾Ñ‚Ð¾Ð²Ð½Ð¾ÑÑ‚Ñ– ÑÐ¸ÑÑ‚ÐµÐ¼Ð¸
validation:
  system_ready_checks:
    - check: "minimum_agents_available"
      threshold: 3
      required: true
    - check: "compatibility_matrix_built"
      required: true
    - check: "error_system_active"
      required: true
    - check: "clarification_system_ready"
      required: false  # optional

# ÐœÐµÑ‚Ñ€Ð¸ÐºÐ¸ ÑƒÑÐ¿Ñ–ÑˆÐ½Ð¾ÑÑ‚Ñ– Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ—
metrics:
  parallel_success_rate:
    description: "Percentage of tasks completed successfully"
    target: "> 0.8"

  initialization_time:
    description: "Total time for parallel initialization"
    target: "< 120s"

  system_availability:
    description: "System ready for requests"
    target: "100%"

# ÐŸÐ¾Ð²Ñ–Ð´Ð¾Ð¼Ð»ÐµÐ½Ð½Ñ Ð¿Ñ€Ð¾ ÑÑ‚Ð°Ñ‚ÑƒÑ Ñ–Ð½Ñ–Ñ†Ñ–Ð°Ð»Ñ–Ð·Ð°Ñ†Ñ–Ñ—
status_messages:
  success: |
    ðŸš€ **Parallel initialization completed successfully**
    âš¡ All system components ready for immediate operation
    ðŸ“Š Parallel success rate: {success_rate}%
    â±ï¸ Initialization time: {init_time}s
    ðŸŽ¯ System status: READY

  partial_success: |
    âš ï¸ **Parallel initialization completed with warnings**
    ðŸ“Š Success rate: {success_rate}% (target: 80%)
    ðŸ”„ Some components may be limited
    ðŸŽ¯ System status: DEGRADED_READY

  failure: |
    âŒ **Parallel initialization failed**
    ðŸ“Š Success rate: {success_rate}% (below threshold)
    ðŸ”„ Falling back to sequential initialization
    ðŸŽ¯ System status: INITIALIZING

# Ð†Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ñ–Ñ Ð· Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾ÑŽ ÑÐ¸ÑÑ‚ÐµÐ¼Ð¾ÑŽ
integration:
  triggers:
    - "system_startup"
    - "configuration_reload"
    - "error_recovery"

  outputs:
    - "system_ready_status"
    - "cached_components"
    - "available_agents"
    - "initialized_capabilities"