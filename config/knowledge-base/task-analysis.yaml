# Task Analysis and Complexity Assessment System
# Comprehensive task classification, complexity scoring, and execution strategy determination

metadata:
  name: "task-analysis-system"
  version: "1.0.0"
  description: "Intelligent task analysis for complexity assessment and execution strategy determination"
  author: "Master Agent System"
  tags: ["task-analysis", "complexity-assessment", "classification", "execution-planning"]

# Complexity Analysis Framework
complexity_analysis_framework:
  scale_definition:
    levels:
      1:
        name: "Trivial"
        description: "Simple, clear tasks requiring minimal resources"
        estimated_effort: "0.5-2 hours"
        characteristics:
          - "Single clear requirement"
          - "No dependencies or external systems"
          - "Standard, well-documented operations"
          - "Clear success criteria"
        
      2:
        name: "Simple"
        description: "Basic tasks with some complexity"
        estimated_effort: "2-4 hours"
        characteristics:
          - "2-3 related requirements"
          - "Minor dependencies or configurations"
          - "Some research required"
          - "Well-defined scope"
          - "Clear execution path"
        
      3:
        name: "Moderate"
        description: "Tasks requiring coordination and decision-making"
        estimated_effort: "4-8 hours"
        characteristics:
          - "Multiple interrelated requirements"
          - "Cross-system dependencies"
          - "Design decisions needed"
          - "Some uncertainty in requirements"
          - "Requires validation of intermediate results"
        
      4:
        name: "Complex"
        description: "Complex tasks with multiple components and integration"
        estimated_effort: "8-16 hours"
        characteristics:
          - "Complex requirements with trade-offs"
          - "Multiple system integrations"
          - "Architecture decisions required"
          - "Risk assessment needed"
          - "Comprehensive testing strategy"
          - "Performance considerations"
        
      5:
        name: "Very Complex"
        description: "Enterprise-level tasks with strategic impact"
        estimated_effort: "16+ hours"
        characteristics:
          - "Enterprise-level architecture"
          - "Multiple complex integrations"
          - "Strategic planning required"
          - "Cross-functional coordination"
          - "Comprehensive governance"
          - "Long-term impact assessment"

  scoring_algorithm:
    implementation: |
      # Complexity Scoring Algorithm
      INPUT: task_description, task_context, available_resources
      OUTPUT: complexity_score (1.0-5.0)
      
      WEIGHTING_FACTORS:
      1. Component Count (weight: 0.25):
          - Count distinct requirements/components
          - 1 component: +0.2 points
          - 2-3 components: +0.4 points
          - 4-5 components: +0.6 points
          - 6+ components: +1.0 points
          - Maximum: +2.0 points
      
      2. Dependencies (weight: 0.20):
          - External system dependencies: +0.5 points each
          - Internal dependencies: +0.2 points each
          - Circular dependencies: +1.0 points each
          - Unknown dependencies: +0.8 points each
          - Maximum: +2.0 points
      
      3. Uncertainty (weight: 0.20):
          - Clear requirements: 0.0 points
          - Minor ambiguity: +0.3 points
          - Moderate uncertainty: +0.6 points
          - High uncertainty: +1.0 points
          - Critical ambiguity: +1.5 points
          - Maximum: +2.0 points
      
      4. Integration Complexity (weight: 0.15):
          - No integration: 0.0 points
          - Single system integration: +0.3 points
          - Multi-system integration: +0.8 points
          - Cross-functional integration: +1.2 points
          - Enterprise integration: +1.5 points
          - Maximum: +2.0 points
      
      5. Resource Requirements (weight: 0.10):
          - Minimal resources: 0.0 points
          - Standard resources: +0.2 points
          - Specialized resources: +0.5 points
          - Critical resources: +0.8 points
          - Limited resources: +1.0 points
          - Maximum: +1.5 points
      
      CALCULATION:
      base_score = 1.0
      final_score = base_score + (component_count + dependencies + uncertainty + integration + resources)
      
      NORMALIZATION:
      - Clamp score to [1.0, 5.0] range
      - Apply confidence adjustment based on analysis clarity
      - Round to one decimal place for final score

# Task Classification System
task_classification_system:
  primary_domains:
    backend_development:
      keywords: ["api", "backend", "server", "database", "microservice", "infrastructure", "rest", "graphql", "sql", "nosql", "authentication", "authorization"]
      patterns: ["build.*api", "design.*backend", "create.*server", "implement.*database"]
      complexity_tendency: 2.0-3.5
      typical_effort: "4-10 hours"
      
    frontend_development:
      keywords: ["frontend", "ui", "ux", "react", "vue", "angular", "web", "css", "javascript", "html", "responsive", "component"]
      patterns: ["build.*ui", "design.*frontend", "create.*web.*app", "implement.*react"]
      complexity_tendency: 2.0-3.5
      typical_effort: "4-10 hours"
      
    devops_infrastructure:
      keywords: ["devops", "infrastructure", "deployment", "ci/cd", "docker", "kubernetes", "terraform", "jenkins", "pipeline", "monitoring"]
      patterns: ["deploy.*application", "setup.*ci", "configure.*kubernetes", "implement.*pipeline"]
      complexity_tendency: 2.5-4.0
      typical_effort: "6-12 hours"
      
    security_engineering:
      keywords: ["security", "vulnerability", "penetration", "compliance", "audit", "authentication", "authorization", "encryption", "firewall"]
      patterns: ["security.*audit", "penetration.*test", "implement.*security", "compliance.*check"]
      complexity_tendency: 3.0-4.5
      typical_effort: "8-15 hours"
      
    testing_quality:
      keywords: ["testing", "qa", "quality", "automation", "test", "validate", "verify", "inspect", "coverage"]
      patterns: ["write.*test", "automate.*testing", "quality.*assurance", "validate.*functionality"]
      complexity_tendency: 1.5-3.0
      typical_effort: "2-8 hours"
      
    data_science:
      keywords: ["data", "analytics", "machine", "learning", "statistics", "visualization", "python", "r", "sql", "dataset"]
      patterns: ["analyze.*data", "build.*model", "visualize.*insights", "process.*statistics"]
      complexity_tendency: 2.0-4.0
      typical_effort: "6-12 hours"
      
    documentation:
      keywords: ["documentation", "writing", "technical", "api.*docs", "manual", "readme", "guide", "specification"]
      patterns: ["write.*documentation", "create.*guide", "update.*readme", "document.*process"]
      complexity_tendency: 1.0-2.0
      typical_effort: "1-4 hours"

  cross_domain_detection:
    patterns:
      - "full-stack": "combines frontend + backend"
      - "devsecops": "combines development + security + operations"
      - "data engineering": "combines data + engineering + infrastructure"
      - "ml-ops": "combines machine learning + operations"
      
    implementation:
      - Identify multiple domain keywords in task
      - Score domain relevance for each detected domain
      - Determine if cross-domain coordination needed
      - Increase complexity score for multi-domain tasks

# Priority Assessment Framework
priority_assessment:
  priority_levels:
    critical:
      description: "Urgent tasks requiring immediate attention"
      indicators:
        - "production", "critical", "security", "compliance", "blocker", "emergency"
      impact_score_multiplier: 2.0
      urgency_weight: 1.5
      
    high:
      description: "Important tasks with business impact"
      indicators:
        - "high", "priority", "important", "major", "significant"
      impact_score_multiplier: 1.5
      urgency_weight: 1.0
      
    medium:
      description: "Standard tasks with regular importance"
      indicators:
        - "medium", "normal", "regular", "standard"
      impact_score_multiplier: 1.0
      urgency_weight: 0.75
      
    low:
      description: "Optional or enhancement tasks"
      indicators:
        - "low", "minor", "nice.*to.*have", "optional", "enhancement"
      impact_score_multiplier: 0.5
      urgency_weight: 0.5

  priority_scoring:
    base_priority: 1.0
    complexity_adjustment:
      - High complexity: +0.5 to priority score
      - Critical complexity: +1.0 to priority score
      - Simple tasks: -0.2 to priority score
    domain_adjustment:
      - Security-related: +1.0 to priority score
      - Performance-related: +0.5 to priority score
      - Documentation: -0.3 to priority score
    time_sensitivity:
      - Time-sensitive: +1.0 to priority score
      - Regular timeline: 0.0 adjustment
      - Long-term: -0.5 to priority score

# Resource Requirement Analysis
resource_requirement_analysis:
  human_resources:
    indicators:
      - "manual", "review", "approval", "decision", "human.*interaction"
      - "supervision", "management", "leadership"
    impact_assessment:
      - "manual review required": +1.0 complexity
      - "human decision needed": +0.8 complexity
      - "team coordination needed": +0.6 complexity
      - "user interaction required": +0.3 complexity
      
  computational_resources:
    indicators:
      - "compute", "process", "analyze", "calculate", "algorithm", "model", "train"
    impact_assessment:
      - "heavy computation": +1.5 complexity
      - "model training": +2.0 complexity
      - "data processing": +1.0 complexity
      - "algorithm complexity": +0.8 complexity
      
  data_resources:
    indicators:
      - "data", "information", "dataset", "database", "storage", "backup"
    impact_assessment:
      - "large datasets": +1.0 complexity
      - "database operations": +0.8 complexity
      - "data migration": +1.5 complexity
      - "data analysis": +0.6 complexity
      
  external_resources:
    indicators:
      - "api", "external", "third.*party", "integration", "service", "web"
    impact_assessment:
      - "external API calls": +0.5 complexity per API
      - "third-party integrations": +1.0 complexity per integration
      - "web service dependencies": +0.8 complexity
      - "external data sources": +0.6 complexity
      
  creative_resources:
    indicators:
      - "design", "creative", "innovative", "brainstorm", "ideate", "prototype"
    impact_assessment:
      - "creative design work": +0.4 complexity
      - "innovation tasks": +0.6 complexity
      - "prototype development": +0.8 complexity
      - "concept exploration": +0.3 complexity

# Execution Strategy Determination
execution_strategy_framework:
  strategy_selection_matrix:
    complexity_1:
      automatic_delegation: true
      execution_method: "mcp_tools_or_single_agent"
      parallel_coordination: false
      human_interaction: false
      
    complexity_2:
      automatic_delegation: true
      execution_method: "single_agent_optimal"
      parallel_coordination: false
      human_interaction: false
      
    complexity_3:
      automatic_delegation: true
      execution_method: "sequential_or_hybrid"
      parallel_coordination: false
      human_interaction: true
      
    complexity_4:
      automatic_delegation: true
      execution_method: "parallel_decomposition"
      parallel_coordination: true
      human_interaction: true
      
    complexity_5:
      automatic_delegation: true
      execution_method: "parallel_execution"
      parallel_coordination: true
      human_interaction: true

  delegation_criteria:
    automatic_triggers:
      - complexity_score >= 2.0
      - task_clarity_is_clear: true
      - available_agents_match_requirements: true
      
    manual_triggers:
      - high_ambiguity_detected: true
      - critical_task_identified: true
      - user_requests_clarification: true
      - insufficient_agent_capabilities: true

  parallel_execution_conditions:
    independent_components:
      - Task can be decomposed into independent subtasks
      - Subtasks have minimal dependencies
      - Different subtasks require different specializations
      
    resource_availability:
      - Multiple suitable agents are available
      - Load balancing is required
      - Time constraints necessitate parallel processing
      
    performance_optimization:
      - Parallel execution would significantly reduce total time
      - Resource utilization can be improved
      - Task complexity justifies coordination overhead

# Error Handling and Edge Cases
error_handling:
  ambiguous_tasks:
    detection:
      - Multiple interpretations possible
      - Missing critical information
      - Conflicting requirements
      - Insufficient context
      
    recovery_strategies:
      - generate_clarification_questions
      - request_specific_information
      - provide_multiple_interpretations
      - recommend_best_guess_with_confidence_score
      
  insufficient_resources:
    detection:
      - No agents with required capabilities
      - All suitable agents overloaded
      - Resource constraints exceeded
      - External dependencies unavailable
      
    recovery_strategies:
      - queue_task_for_later_execution
      - prioritize_critical_components
      - request_additional_resources
      - implement_staged_implementation
      
  complexity_mismatch:
    detection:
      - Task complexity exceeds available agent capabilities
      - Agent experience insufficient for task complexity
      - System cannot handle task complexity level
      - Resource allocation inadequate
      
    recovery_strategies:
      - decompose_task_into_smaller_components
      - request_additional_expertise
      - implement_staged_approach
      - recommend_alternative_solutions

# Output Generation
output_specification:
  task_analysis_result:
    complexity_score: "number (1.0-5.0)"
    confidence_level: "number (0.0-1.0)"
    domain_classification: "string"
    priority_level: "string"
    resource_requirements: "object"
    execution_strategy: "string"
    estimated_effort: "string"
    risk_assessment: "object"
    
  detailed_analysis:
    component_breakdown: "array of components"
    dependency_mapping: "object"
    integration_requirements: "array"
    potential_challenges: "array"
    mitigation_strategies: "array"
    success_criteria: "array"

  execution_plan:
    phases: "array of execution phases"
    agent_assignments: "array of agent assignments"
    timeline_estimates: "object"
    coordination_points: "array"
    validation_checkpoints: "array"

# Quality Assurance
quality_assurance:
  validation_rules:
    - complexity_score_range: "Must be between 1.0-5.0"
    confidence_threshold: "Minimum 0.6 for critical tasks"
    domain_classification: "Must match detected patterns"
    resource_requirements: "Must be realistic for available resources"
    execution_strategy: "Must match task characteristics"
    
  consistency_checks:
    - cross_validation_with_historical_data
    - consistency_with_system_capabilities
    - alignment_with_user_expectations
    - reproducibility_of_analysis_results
    
  performance_metrics:
    - analysis_processing_time: "Should be < 2 seconds"
    - accuracy_rate: "Target > 85%"
    - user_satisfaction: "Target > 80%"
    - error_recovery_success: "Target > 90%"

# Integration Points
integration_interface:
  input_sources:
    - user_request: "Primary task input"
    - system_state: "Current system state information"
    - agent_registry: "Available agent capabilities"
    - historical_data: "Performance patterns and outcomes"
    
  output_destinations:
    - agent_selection_system: "For agent matching"
    - orchestration_engine: "For task coordination"
    - learning_module: "For performance feedback"
    - user_interface: "For status communication"
    
  system_dependencies:
    - tfidf_system: "For text similarity analysis"
    - agent_registry: "For capability assessment"
    - learning_module: "For adaptive optimization"
    - monitoring_system: "for performance tracking"